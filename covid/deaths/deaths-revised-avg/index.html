<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Rhode Island COVID-19</title>

    <link href= "/covid/static/main.css" rel="stylesheet"/>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css" rel="stylesheet"/>
</head>
<nav class="navbar fixed-top navbar-dark bg-dark">
    <a href="https://ivizri.com" class="navbar-brand">ivizri.com</a>
    <a data-toggle="collapse" href="#" data-target=".ravel" role="button" class="p-1">
        <i class="fa fa-bars fa-lg"></i>
    </a>
</nav>
<div class="container-fluid px-0 h-100">
    <div class="row min-vh-100 collapse show no-gutters d-flex h-100 position-relative ravel">
        <div class="p-0 h-100 text-white w-sidebar navbar-collapse collapse d-none d-md-flex sidebar ravel">
            <!-- fixed sidebar -->
<div class="sidenav position-fixed text-white h-100 w-sidebar p-4">
    <div class="sidenav-content">
        <ul class="list-unstyled components mt-5 mb-3">
            <li class="active"><a href="/covid/">Daily Update</a></li>
            <li class="active"><a href="/covid/totals/">Current Totals</a></li>
        </ul>
        <ul class="list-unstyled components mb-3">
            <li>
                <a href="#deathsSubmenu" data-toggle="collapse" data-target="#deathsSubmenu" aria-expanded="false" class="panel-title active">Deaths</a>
                    <ul class="collapse list-unstyled" id="deathsSubmenu">
                        <li class="sub-item"><a href="/covid/deaths/daily-deaths/">Daily Deaths</a></li>
                        <li class="sub-item"><a href="/covid/deaths/deaths-revised-bar/">Deaths Revised (bar)</a></li>
                        <li class="sub-item"><a href="/covid/deaths/deaths-revised-avg/">Deaths Revised (avg)</a></li>
                    </ul>
                </li>
        
                <li>
                <a href="#testSubmenu" data-toggle="collapse" data-target="#testSubmenu" aria-expanded="false" class="panel-title collapsed">Testing</a>
                    <ul class="collapse list-unstyled" id="testSubmenu">
                        <li class="sub-item"><a href="/covid/testing/labs-positive/">Labs Positive</a></li>
                        <li class="sub-item"><a href="/covid/testing/labs-positive-pct/">Labs Positive (&nbsp;%&nbsp;)</a></li>
                        <li class="sub-item"><a href="/covid/testing/people-positive/">People Positive</a></li>
                        <li class="sub-item"><a href="/covid/testing/people-positive-pct/">People Positive (&nbsp;%&nbsp;)</a></li>
                    </ul>
                </li>
                <li>
                <a href="#hospSubmenu" data-toggle="collapse" data-target="#hospSubmenu" aria-expanded="false" class="panel-title collapsed">Hospitalized</a>
                    <ul class="collapse list-unstyled" id="hospSubmenu">
                        <li class="sub-item"><a href="/covid/hospital/admissions/">Hospital Admissions</a></li>
                        <li class="sub-item"><a href="/covid/hospital/intensive-care/">Intensive Care</a></li>
                        <li class="sub-item"><a href="/covid/hospital/ventilator/">Ventilator</a></li>
                    </ul>
                </li>
            </li>
        </ul>
    </div>
    <div class="sidenav-footer">
        <ul class="list-unstyled components mb-5">
            <li><a href="/covid/about/">About</a></li>
            <li><a href="https://twitter.com/RI_COVID19">Twitter Bot</a></li>
        </ul>
        <ul class="list-unstyled components mb-5">
            <div class="small text-side">Updated: 1/13/2021</div>
            <div class="small text-side">Designed by: SmirkyGraphs</div>
        </ul>
    </div>
</div>
        </div>
        
<!-- Modal -->
<div class="modal fade" id="daily-update-src" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalTitle">""</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-2">
                        <p class="text-md-right mb-0">Source:</p>
                    </div>
                    <div class="col">
                        <p id="modalSource" class="mb-0"></p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <p class="text-md-right">Columns:</p>
                    </div>
                    <div class="col">
                        <p id="modalDetails" class="mb-0">""</p>
                    </div>
                </div>
                <hr class="m-1">
                <div class="row">
                    <div class="col-md-2">
                        <p class="text-md-right">Description:</p>
                    </div>
                    <div class="col">
                        <p id="modalDesc" class="mb-0">""</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function showModal(m) {
        document.getElementById("modalTitle").innerHTML = m.getAttribute("data-title");
        document.getElementById("modalSource").innerHTML = m.getAttribute("data-src");
        document.getElementById("modalDetails").innerHTML = m.getAttribute("data-details");
        document.getElementById("modalDesc").innerHTML = m.getAttribute("data-desc");
    }
</script>    
<div class="col p-3">
    <div class='mt-4 mb-4'>
        <div class='btn-toolbar pull-right'>
          <div class='btn-group'>
            <button type='button'
            onclick="showModal(this)"
            class='btn btn-outline-info'
            data-toggle="modal" 
            data-title="First Reported vs. Current (7-day Moving Avg)"
            data-src="<a href='https://docs.google.com/spreadsheets/d/1c2QrNMz8pIbYEKzMJL7Uh2dtThOJa2j1sSMwiDo5Gz4/edit#gid=1592746937'>RIDOH Trends Sheet</a>"
            data-details='"Date of deaths"'
            data-desc="The blue line is calculated as a 7-day moving average by using the first reported value for each day. The orange line is the current up to date 7-day moving average."
            data-target="#daily-update-src">Source</button>
          </div>
        </div>
        <h2 class="mt-4 mb-4">First Reported vs. Current (7-day Moving Avg)</h2>
        <p>
            This graph shows the 7-day moving average of the initial reported number of deaths by RIDOH 
            for every date as a blue line labeled "first reported". In orange, you can see the updated 7-day 
            moving average using current deaths for those dates labeled "current data". This provides an insight 
            of the difference of preliminary data and more accurate numbers updated sometimes months later.
        </p>
    </div>
    <div class="row">
        <div class="col-xl-12 chart-container">
            <div class="card mb-4">
                <div class="card-body p-0">
                    <img src="https://raw.githubusercontent.com/SmirkyGraphs/ri-covid19-updates/master/figures/first_vs_current.png" class="img-fluid" alt="Responsive image">
                </div>
            </div>
        </div>
    </div>
</div>


    </div>
</div>
<footer>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>       
    <script src="/covid/static/js/table.js"></script>

    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-106762433-4']);
        _gaq.push(['_trackPageview']);
    
        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
</footer>
</html>
